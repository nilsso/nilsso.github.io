(this.webpackJsonpjapanese=this.webpackJsonpjapanese||[]).push([[0],{31:function(e,t,n){e.exports=n(42)},37:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),l=n.n(r),u=n(18),o=n.n(u),s=n(5),i=n(22),m=n(28),b=n(45),f=n(46),h=n(47),d=n(48),v=n(54),E=n(29),p=n(53),y=n(52),j=n(49),O=n(51),g=n(50),k=n(15),S=n(19);function w(e){return console.assert(e.length>0),Math.floor(Math.random()*e.length)}function _(e){return e[w(e)]}var C=function(){function e(t,n){Object(k.a)(this,e),this.sentence_template=void 0,this.meaning_template=void 0,this.sentence_template=t,this.meaning_template=n}return Object(S.a)(e,[{key:"populate",value:function(e){for(var t=this.sentence_template.slice(),n=this.meaning_template.slice(),a=/{{(.+)}}/,c=function(c){t=t.replace(a,(function(t){if(t in e&&e[t].length>0){var a=_(e[t]),r=Object(s.a)(a,2),l=r[0],u=r[1],o=new RegExp("\\{\\{"+c+"}}","g");return n=n.replace(o,u),l}return t}))},r=1;t.search(a)>=0;r++)c(r);return[t,n]}}]),e}(),x=function e(t,n,a){Object(k.a)(this,e),this.enabled=void 0,this.sentences=void 0,this.vocabulary=void 0,this.enabled=t,this.sentences=n,this.vocabulary=a},I=function(){function e(t,n,a){Object(k.a)(this,e),this.name=void 0,this.sentences=void 0,this.vocabulary=void 0,this.name=t,this.sentences=n,this.vocabulary=a}return Object(S.a)(e,[{key:"random_with_vocabulary",value:function(e){return this.sentences.length>0?_(this.sentences).populate(e):["",""]}},{key:"random",value:function(){return this.random_with_vocabulary(this.vocabulary)}}],[{key:"empty",value:function(){return new e("Empty",[],{})}},{key:"from_json",value:function(t){return new e(t.name,t.sentences.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return new C(n,a)})),t.vocabulary)}},{key:"join",value:function(t,n){var a=new e("Joined",[],{});return t.forEach((function(e,t){if(n.enabled[t]&&(n.sentences[t]&&(a.sentences=a.sentences.concat(e.sentences)),n.vocabulary[t]))for(var c=0,r=Object.entries(e.vocabulary);c<r.length;c++){var l=Object(s.a)(r[c],2),u=l[0],o=l[1];u in a.vocabulary?a.vocabulary[u]=a.vocabulary[u].concat(o):a.vocabulary[u]=o}})),a}}]),e}(),N=(n(37),function(e,t){return Array(e).fill(t)}),V=function(e,t,n){var a=Object(m.a)(e);return a[t]=n,a};function M(){return(M=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return n=e})).catch((function(e){return alert("Invalid source URL\n"+e)}));case 2:if(!n){e.next=6;break}return e.abrupt("return",n);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=e.source,n=e.setSource,r=Object(a.useState)(t),l=Object(s.a)(r,2),u=l[0],o=l[1];return c.a.createElement(f.a,null,c.a.createElement(h.a,{className:"component"},c.a.createElement(d.a,null,c.a.createElement(d.a.Prepend,null,c.a.createElement(d.a.Text,null,"Module Source")),c.a.createElement(v.a,{defaultValue:u,onChange:function(e){return o(e.target.value)}}),c.a.createElement(d.a.Append,null,c.a.createElement(E.a,{variant:"outline-secondary",onClick:function(){return n(u)}},"Load")))))}function A(e){var t=e.joined,n=Object(a.useState)("..."),r=Object(s.a)(n,2),l=r[0],u=r[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),m=i[0],b=i[1],f=Object(a.useState)("..."),d=Object(s.a)(f,2),v=d[0],O=d[1],g=Object(a.useState)(!1),k=Object(s.a)(g,2),S=k[0],w=k[1];return c.a.createElement(h.a,{className:"component"},c.a.createElement(p.a,null,c.a.createElement(p.a.Header,null,"Generator"),c.a.createElement(y.a,{variant:"flush"},c.a.createElement(y.a.Item,null,c.a.createElement(j.a,null,c.a.createElement(E.a,{onClick:function(){var e=t.random(),n=Object(s.a)(e,2),a=n[0],c=n[1];if(a){var r=S?[c,a]:[a,c],l=Object(s.a)(r,2);a=l[0],c=l[1],O("..."),u(a),b(c)}}},"Generate"),c.a.createElement(E.a,{variant:"success",onClick:function(){return O(m)}},"Reveal"),c.a.createElement(E.a,{active:S,variant:"outline-secondary",onClick:function(){return w(!S)}},"Swap"))),c.a.createElement(y.a.Item,null,c.a.createElement("p",null,l)),c.a.createElement(y.a.Item,null,c.a.createElement("p",null,v)))))}function B(e){var t=e.modules,n=e.enabled,a=e.sentences,r=e.vocabulary,l=e.setEnabled,u=e.setSentences,o=e.setVocabulary,s=function(e){l(N(t.length,e))},i=t.map((function(e,t){return c.a.createElement(z,{key:t,name:e.name,enabled:n[t],sentences:a[t],vocabulary:r[t],setEnabled:function(e){return l(V(n,t,e))},setSentences:function(e){return u(V(a,t,e))},setVocabulary:function(e){return o(V(r,t,e))}})}));return c.a.createElement(h.a,{className:"component"},c.a.createElement(p.a,null,c.a.createElement(p.a.Header,null,"Modules"),c.a.createElement(y.a,{variant:"flush"},c.a.createElement(y.a.Item,null,c.a.createElement(j.a,null,c.a.createElement(E.a,{variant:"primary",onClick:function(){return s(!0)}},"All"),c.a.createElement(E.a,{variant:"danger",onClick:function(){return s(!1)}},"None"))),c.a.createElement(y.a.Item,null,c.a.createElement("div",{id:"module-list"},i)))))}function z(e){var t=e.enabled,n=e.sentences,a=e.vocabulary,r=e.setEnabled,l=e.setSentences,u=e.setVocabulary;return c.a.createElement(O.a,{className:"module"},c.a.createElement(p.a,null,c.a.createElement(p.a.Body,{id:"module-control"},c.a.createElement(j.a,{toggle:!0,className:"module-controls"},c.a.createElement(g.a,{type:"checkbox",variant:"outline-primary",size:"sm",value:0,checked:t,onChange:function(e){return r(e.currentTarget.checked)}},e.name),c.a.createElement(g.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:1,checked:n,disabled:!t,onChange:function(e){return l(e.currentTarget.checked)}},"Sentences"),c.a.createElement(g.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:2,checked:a,disabled:!t,onChange:function(e){return u(e.currentTarget.checked)}},"Vocabulary")))),c.a.createElement(p.a,null,c.a.createElement(O.a.Toggle,{as:p.a.Header,className:"module-contents-header small",variant:"link",eventKey:"0"},"Contents"),c.a.createElement(O.a.Collapse,{eventKey:"0"},c.a.createElement(p.a.Body,null,"Sentences, Vocabulary"))))}var H=function(){var e=Object(a.useState)("https://raw.githubusercontent.com/nilsso/nilsso.github.io/code/static/apps/lang_modules/japanese_modules.json"),t=Object(s.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(Array(0)),u=Object(s.a)(l,2),o=u[0],i=u[1],m=Object(a.useState)(I.empty()),h=Object(s.a)(m,2),d=h[0],v=h[1],E=Object(a.useState)(N(0,!1)),p=Object(s.a)(E,2),y=p[0],j=p[1],O=Object(a.useState)(N(0,!0)),g=Object(s.a)(O,2),k=g[0],S=g[1],w=Object(a.useState)(N(0,!0)),_=Object(s.a)(w,2),C=_[0],V=_[1];return Object(a.useEffect)((function(){(function(e){return M.apply(this,arguments)})(n).then((function(e){return i(e.map((function(e){return I.from_json(e)})))}))}),[n]),Object(a.useEffect)((function(){j(N(o.length,!1)),S(N(o.length,!0)),V(N(o.length,!0))}),[o]),Object(a.useEffect)((function(){o.length>0&&v(I.join(o,new x(y,k,C)))}),[o,y,k,C]),c.a.createElement(b.a,null,c.a.createElement(f.a,null,c.a.createElement(A,{joined:d}),c.a.createElement(B,{modules:o,enabled:y,sentences:k,vocabulary:C,setEnabled:j,setSentences:S,setVocabulary:V})),c.a.createElement(T,{source:n,setSource:r}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.2620a263.chunk.js.map