(this.webpackJsonpjapanese=this.webpackJsonpjapanese||[]).push([[0],{32:function(e,t,a){e.exports=a(43)},38:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),l=a.n(r),u=a(18),o=a.n(u),s=a(5),i=a(22),m=a(29),d=a(46),b=a(47),v=a(48),f=a(49),h=a(55),E=a(30),y=a(54),p=a(53),j=a(50),g=a(52),O=a(51),k=a(23),_=a(15),w=a(19);function S(e){return console.assert(e.length>0),Math.floor(Math.random()*e.length)}function N(e){return e[S(e)]}var C=function(){function e(t,a){Object(_.a)(this,e),this.sentence_template=void 0,this.meaning_template=void 0,this.sentence_template=t,this.meaning_template=a}return Object(w.a)(e,[{key:"populate",value:function(e){var t,a=this.sentence_template.slice(),n=this.meaning_template.slice(),c=1,r=Object(k.a)(this.sentence_template.matchAll(/\{\{.+}}/g));try{for(r.s();!(t=r.n()).done;){var l=t.value;if(l){var u=l[0];if(u in e&&e[u].length>0){var o=N(e[u]),i=Object(s.a)(o,2),m=i[0],d=i[1];a=a.replace(u,m),n=n.replace(new RegExp("\\{\\{"+c+"}}","g"),d)}}c+=1}}catch(b){r.e(b)}finally{r.f()}return[a,n]}}]),e}(),x=function e(t,a,n){Object(_.a)(this,e),this.enabled=void 0,this.sentences=void 0,this.vocabulary=void 0,this.enabled=t,this.sentences=a,this.vocabulary=n},I=function(){function e(t,a,n){Object(_.a)(this,e),this.name=void 0,this.sentences=void 0,this.vocabulary=void 0,this.name=t,this.sentences=a,this.vocabulary=n}return Object(w.a)(e,[{key:"random_with_vocabulary",value:function(e){return this.sentences.length>0?N(this.sentences).populate(e):["",""]}},{key:"random",value:function(){return this.random_with_vocabulary(this.vocabulary)}}],[{key:"empty",value:function(){return new e("Empty",[],{})}},{key:"from_json",value:function(t){return new e(t.name,t.sentences.map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return new C(a,n)})),t.vocabulary)}},{key:"join",value:function(t,a){var n=new e("Joined",[],{});return t.forEach((function(e,t){if(a.enabled[t]&&(a.sentences[t]&&(n.sentences=n.sentences.concat(e.sentences)),a.vocabulary[t]))for(var c=0,r=Object.entries(e.vocabulary);c<r.length;c++){var l=Object(s.a)(r[c],2),u=l[0],o=l[1];u in n.vocabulary?n.vocabulary[u]=n.vocabulary[u].concat(o):n.vocabulary[u]=o}})),n}}]),e}(),V=(a(38),function(e,t){return Array(e).fill(t)}),T=function(e,t,a){var n=Object(m.a)(e);return n[t]=a,n};function A(){return(A=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return a=e})).catch((function(e){return alert("Invalid source URL\n"+e)}));case 2:if(!a){e.next=6;break}return e.abrupt("return",a);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=[e.source,e.setSource],a=t[0],r=t[1],l=Object(n.useState)(a),u=Object(s.a)(l,2),o=u[0],i=u[1];return c.a.createElement(b.a,null,c.a.createElement(v.a,{className:"component"},c.a.createElement(f.a,null,c.a.createElement(f.a.Prepend,null,c.a.createElement(f.a.Text,null,"Module Source")),c.a.createElement(h.a,{defaultValue:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement(f.a.Append,null,c.a.createElement(E.a,{variant:"outline-secondary",onClick:function(){return r(o)}},"Load")))))}function H(e){var t=e.joined,a=Object(n.useState)("..."),r=Object(s.a)(a,2),l=r[0],u=r[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),m=i[0],d=i[1],b=Object(n.useState)("..."),f=Object(s.a)(b,2),h=f[0],g=f[1],O=Object(n.useState)(!1),k=Object(s.a)(O,2),_=k[0],w=k[1];return c.a.createElement(v.a,{className:"component"},c.a.createElement(y.a,null,c.a.createElement(y.a.Header,null,"Generator"),c.a.createElement(p.a,{variant:"flush"},c.a.createElement(p.a.Item,null,c.a.createElement(j.a,null,c.a.createElement(E.a,{onClick:function(){var e=t.random(),a=Object(s.a)(e,2),n=a[0],c=a[1];if(n){var r=_?[c,n]:[n,c],l=Object(s.a)(r,2);n=l[0],c=l[1],g("..."),u(n),d(c)}}},"Generate"),c.a.createElement(E.a,{variant:"success",onClick:function(){return g(m)}},"Reveal"),c.a.createElement(E.a,{active:_,variant:"outline-secondary",onClick:function(){return w(!_)}},"Swap"))),c.a.createElement(p.a.Item,null,c.a.createElement("p",null,l)),c.a.createElement(p.a.Item,null,c.a.createElement("p",null,h)))))}function K(e){var t=e.modules,a=[e.enabled,e.setEnabled],n=a[0],r=a[1],l=[e.sentences,e.setSentences],u=l[0],o=l[1],s=[e.vocabulary,e.setVocabulary],i=s[0],m=s[1],d=function(e){r(V(t.length,e))},b=t.map((function(e,t){return c.a.createElement(M,{key:t,lang_module:e,enabled:n[t],sentences:u[t],vocabulary:i[t],setEnabled:function(e){return r(T(n,t,e))},setSentences:function(e){return o(T(u,t,e))},setVocabulary:function(e){return m(T(i,t,e))}})}));return c.a.createElement(v.a,{className:"component"},c.a.createElement(y.a,null,c.a.createElement(y.a.Header,null,"Modules"),c.a.createElement(p.a,{variant:"flush"},c.a.createElement(p.a.Item,null,c.a.createElement(j.a,null,c.a.createElement(E.a,{variant:"primary",onClick:function(){return d(!0)}},"All"),c.a.createElement(E.a,{variant:"danger",onClick:function(){return d(!1)}},"None"))),c.a.createElement(p.a.Item,null,c.a.createElement("div",{id:"module-list"},b)))))}function M(e){var t=e.lang_module,a=[e.enabled,e.setEnabled],n=a[0],r=a[1],l=[e.sentences,e.setSentences],u=l[0],o=l[1],s=[e.vocabulary,e.setVocabulary],i=s[0],m=s[1],d=t.sentences.length>0,b=Object.entries(t.vocabulary).length>0;return c.a.createElement(g.a,{className:"module"},c.a.createElement(y.a,null,c.a.createElement(y.a.Body,{id:"module-control"},c.a.createElement(j.a,{toggle:!0,className:"module-controls"},c.a.createElement(O.a,{type:"checkbox",variant:"outline-primary",size:"sm",value:0,checked:n,onChange:function(e){return r(e.currentTarget.checked)}},t.name),d&&c.a.createElement(O.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:1,checked:u,disabled:!n,onChange:function(e){return o(e.currentTarget.checked)}},"Sentences/Expressions"),b&&c.a.createElement(O.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:2,checked:i,disabled:!n,onChange:function(e){return m(e.currentTarget.checked)}},"Vocabulary")))),c.a.createElement(y.a,null,d&&c.a.createElement(z,{lang_module:t}),b&&c.a.createElement(F,{lang_module:t})))}function z(e){var t=e.lang_module.sentences.map((function(e,t){return c.a.createElement(b.a,{key:t,className:"module-content-item"},c.a.createElement(v.a,null,e.sentence_template),c.a.createElement(v.a,null,e.meaning_template))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a.Toggle,{as:y.a.Header,className:"small module-contents-header",variant:"link",eventKey:"0"},"View Sentences and Expressions"),c.a.createElement(g.a.Collapse,{eventKey:"0"},c.a.createElement(y.a.Body,null,c.a.createElement(y.a,{className:"module-content"},c.a.createElement(d.a,{fluid:!0},t)))))}function F(e){var t=e.lang_module,a=Object.entries(t.vocabulary).map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1];return c.a.createElement(c.a.Fragment,{key:t},c.a.createElement(p.a.Item,{variant:"secondary"},n),c.a.createElement(p.a.Item,{className:"vocabulary"},c.a.createElement(d.a,null,function(e){return e.map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1];return c.a.createElement(b.a,{key:t,className:"module-content-item"},c.a.createElement(v.a,null,n),c.a.createElement(v.a,null,r))}))}(r))))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a.Toggle,{as:y.a.Header,className:"small module-contents-header",variant:"link",eventKey:"1"},"View Vocabulary"),c.a.createElement(g.a.Collapse,{eventKey:"1"},c.a.createElement(y.a.Body,null,c.a.createElement(y.a,{className:"module-content"},c.a.createElement(p.a,{variant:"flush"},a)))))}var J=function(){var e=Object(n.useState)("https://raw.githubusercontent.com/nilsso/nilsso.github.io/code/static/apps/lang_modules/japanese_modules.json"),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(Array(0)),u=Object(s.a)(l,2),o=u[0],i=u[1],m=Object(n.useState)(I.empty()),v=Object(s.a)(m,2),f=v[0],h=v[1],E=Object(n.useState)(V(0,!1)),y=Object(s.a)(E,2),p=y[0],j=y[1],g=Object(n.useState)(V(0,!0)),O=Object(s.a)(g,2),k=O[0],_=O[1],w=Object(n.useState)(V(0,!0)),S=Object(s.a)(w,2),N=S[0],C=S[1];return Object(n.useEffect)((function(){(function(e){return A.apply(this,arguments)})(a).then((function(e){return i(e.map((function(e){return I.from_json(e)})))}))}),[a]),Object(n.useEffect)((function(){j(V(o.length,!1)),_(V(o.length,!0)),C(V(o.length,!0))}),[o]),Object(n.useEffect)((function(){o.length>0&&h(I.join(o,new x(p,k,N)))}),[o,p,k,N]),c.a.createElement(d.a,null,c.a.createElement(b.a,null,c.a.createElement(H,{joined:f}),c.a.createElement(K,{modules:o,enabled:p,sentences:k,vocabulary:N,setEnabled:j,setSentences:_,setVocabulary:C})),c.a.createElement(B,{source:a,setSource:r}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.4d027720.chunk.js.map