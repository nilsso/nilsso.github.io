(this.webpackJsonpjapanese=this.webpackJsonpjapanese||[]).push([[0],{32:function(e,a,t){e.exports=t(43)},38:function(e,a,t){},43:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),u=t(18),o=t.n(u),m=t(5),s=t(22),i=t(29),f=t(46),d=t(47),b=t(48),v=t(49),g=t(55),h=t(30),E=t(54),y=t(53),p=t(50),j=t(52),k=t(51),O=t(23),_=t(15),w=t(19);function F(e){return console.assert(e.length>0),Math.floor(Math.random()*e.length)}function M(e){return e[F(e)]}var S=function(){function e(a,t){Object(_.a)(this,e),this.fragment_template=void 0,this.meaning_template=void 0,this.fragment_template=a,this.meaning_template=t}return Object(w.a)(e,[{key:"populate",value:function(e){var a,t=this.fragment_template.slice(),n=this.meaning_template.slice(),r=1,l=Object(O.a)(this.fragment_template.matchAll(/\{\{.+}}/g));try{for(l.s();!(a=l.n()).done;){var c=a.value;if(c){var u=c[0];if(u in e&&e[u].length>0){var o=M(e[u]),s=Object(m.a)(o,2),i=s[0],f=s[1];t=t.replace(u,i),n=n.replace(new RegExp("\\{\\{"+r+"}}","g"),f)}}r+=1}}catch(d){l.e(d)}finally{l.f()}return[t,n]}}]),e}(),N=function e(a,t,n){Object(_.a)(this,e),this.enabled=void 0,this.fragments=void 0,this.vocabulary=void 0,this.enabled=a,this.fragments=t,this.vocabulary=n},C=function(){function e(a,t,n){Object(_.a)(this,e),this.name=void 0,this.fragments=void 0,this.vocabulary=void 0,this.name=a,this.fragments=t,this.vocabulary=n}return Object(w.a)(e,[{key:"random_with_vocabulary",value:function(e){return this.fragments.length>0?M(this.fragments).populate(e):["...","..."]}},{key:"random",value:function(){return this.random_with_vocabulary(this.vocabulary)}}],[{key:"empty",value:function(){return new e("Empty",[],{})}},{key:"from_json",value:function(a){return new e(a.name,a.fragments.map((function(e){var a=Object(m.a)(e,2),t=a[0],n=a[1];return new S(t,n)})),a.vocabulary)}},{key:"join",value:function(a,t){var n=new e("Joined",[],{});return a.forEach((function(e,a){if(t.enabled[a]&&(t.fragments[a]&&(n.fragments=n.fragments.concat(e.fragments)),t.vocabulary[a]))for(var r=0,l=Object.entries(e.vocabulary);r<l.length;r++){var c=Object(m.a)(l[r],2),u=c[0],o=c[1];u in n.vocabulary?n.vocabulary[u]=n.vocabulary[u].concat(o):n.vocabulary[u]=o}})),n}}]),e}(),x=(t(38),function(e,a){return Array(e).fill(a)}),I=function(e,a,t){var n=Object(i.a)(e);return n[a]=t,n};function V(){return(V=Object(s.a)(o.a.mark((function e(a){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a).then((function(e){return e.json()})).then((function(e){return t=e})).catch((function(e){return alert("Invalid source URL\n"+e)}));case 2:if(!t){e.next=6;break}return e.abrupt("return",t);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var a=[e.source,e.setSource],t=a[0],l=a[1],c=Object(n.useState)(t),u=Object(m.a)(c,2),o=u[0],s=u[1];return r.a.createElement(d.a,null,r.a.createElement(b.a,{className:"component"},r.a.createElement(v.a,null,r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,null,"Module Source")),r.a.createElement(g.a,{defaultValue:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement(v.a.Append,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return l(o)}},"Load")))))}function A(e){var a=e.joined,t=Object(n.useState)("..."),l=Object(m.a)(t,2),c=l[0],u=l[1],o=Object(n.useState)(""),s=Object(m.a)(o,2),i=s[0],f=s[1],d=Object(n.useState)("..."),v=Object(m.a)(d,2),g=v[0],j=v[1],k=Object(n.useState)(!1),O=Object(m.a)(k,2),_=O[0],w=O[1];return r.a.createElement(b.a,{className:"component"},r.a.createElement(E.a,null,r.a.createElement(E.a.Header,null,"Generator"),r.a.createElement(y.a,{variant:"flush"},r.a.createElement(y.a.Item,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{onClick:function(){var e=a.random(),t=Object(m.a)(e,2),n=t[0],r=t[1];if(n){var l=_?[r,n]:[n,r],c=Object(m.a)(l,2);n=c[0],r=c[1],j("..."),u(n),f(r)}}},"Generate"),r.a.createElement(h.a,{variant:"success",onClick:function(){return j(i)}},"Reveal"),r.a.createElement(h.a,{active:_,variant:"outline-secondary",onClick:function(){return w(!_)}},"Swap"))),r.a.createElement(y.a.Item,null,r.a.createElement("p",null,c)),r.a.createElement(y.a.Item,null,r.a.createElement("p",null,g)))))}function B(e){var a=e.modules,t=[e.enabledMask,e.setEnabledMask],n=t[0],l=t[1],c=[e.fragmentMask,e.setFragmentMask],u=c[0],o=c[1],m=[e.vocabularyMask,e.setVocabularyMask],s=m[0],i=m[1],f=function(e){l(x(a.length,e))},d=a.map((function(e,a){return r.a.createElement(H,{key:a,lang_module:e,enabledFlag:n[a],fragmentFlag:u[a],vocabularyFlag:s[a],setEnabledFlag:function(e){return l(I(n,a,e))},setFragmentFlag:function(e){return o(I(u,a,e))},setVocabularyFlag:function(e){return i(I(s,a,e))}})}));return r.a.createElement(b.a,{className:"component"},r.a.createElement(E.a,null,r.a.createElement(E.a.Header,null,"Modules"),r.a.createElement(y.a,{variant:"flush"},r.a.createElement(y.a.Item,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{variant:"primary",onClick:function(){return f(!0)}},"All"),r.a.createElement(h.a,{variant:"danger",onClick:function(){return f(!1)}},"None"))),r.a.createElement(y.a.Item,null,r.a.createElement("div",{id:"module-list"},d)))))}function H(e){var a=e.lang_module,t=[e.enabledFlag,e.setEnabledFlag],n=t[0],l=t[1],c=[e.fragmentFlag,e.setFragmentFlag],u=c[0],o=c[1],m=[e.vocabularyFlag,e.setVocabularyFlag],s=m[0],i=m[1],f=!!u,d=!!s;return r.a.createElement(j.a,{className:"module"},r.a.createElement(E.a,null,r.a.createElement(E.a.Body,{id:"module-control"},r.a.createElement(p.a,{toggle:!0,className:"module-controls"},r.a.createElement(k.a,{type:"checkbox",variant:"outline-primary",size:"sm",value:0,checked:n,onChange:function(e){return l(e.currentTarget.checked)}},a.name),f&&r.a.createElement(k.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:1,checked:u,disabled:!n,onChange:function(e){return o(e.currentTarget.checked)}},"Fragments"),d&&r.a.createElement(k.a,{type:"checkbox",variant:"outline-secondary",size:"sm",value:2,checked:s,disabled:!n,onChange:function(e){return i(e.currentTarget.checked)}},"Vocabulary")))),r.a.createElement(E.a,null,f&&r.a.createElement(K,{lang_module:a}),d&&r.a.createElement(z,{lang_module:a})))}function K(e){var a=e.lang_module.fragments.map((function(e,a){return r.a.createElement(d.a,{key:a,className:"module-content-item"},r.a.createElement(b.a,null,e.fragment_template),r.a.createElement(b.a,null,e.meaning_template))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Toggle,{as:E.a.Header,className:"small module-contents-header",variant:"link",eventKey:"0"},"View Fragments"),r.a.createElement(j.a.Collapse,{eventKey:"0"},r.a.createElement(E.a.Body,null,r.a.createElement(E.a,{className:"module-content"},r.a.createElement(f.a,{fluid:!0},a)))))}function z(e){var a=e.lang_module,t=Object.entries(a.vocabulary).map((function(e,a){var t=Object(m.a)(e,2),n=t[0],l=t[1];return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(y.a.Item,{variant:"secondary"},n),r.a.createElement(y.a.Item,{className:"vocabulary"},r.a.createElement(f.a,null,function(e){return e.map((function(e,a){var t=Object(m.a)(e,2),n=t[0],l=t[1];return r.a.createElement(d.a,{key:a,className:"module-content-item"},r.a.createElement(b.a,null,n),r.a.createElement(b.a,null,l))}))}(l))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Toggle,{as:E.a.Header,className:"small module-contents-header",variant:"link",eventKey:"1"},"View Vocabulary"),r.a.createElement(j.a.Collapse,{eventKey:"1"},r.a.createElement(E.a.Body,null,r.a.createElement(E.a,{className:"module-content"},r.a.createElement(y.a,{variant:"flush"},t)))))}var J=function(){var e=Object(n.useState)("https://raw.githubusercontent.com/nilsso/nilsso.github.io/code/static/apps/lang_modules/japanese_modules.json"),a=Object(m.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(Array(0)),u=Object(m.a)(c,2),o=u[0],s=u[1],i=Object(n.useState)(C.empty()),b=Object(m.a)(i,2),v=b[0],g=b[1],h=Object(n.useState)(x(0,!1)),E=Object(m.a)(h,2),y=E[0],p=E[1],j=Object(n.useState)(x(0,!0)),k=Object(m.a)(j,2),O=k[0],_=k[1],w=Object(n.useState)(x(0,!0)),F=Object(m.a)(w,2),M=F[0],S=F[1];return Object(n.useEffect)((function(){(function(e){return V.apply(this,arguments)})(t).then((function(e){return s(e.map((function(e){return C.from_json(e)})))}))}),[t]),Object(n.useEffect)((function(){p(x(o.length,!1)),_(x(o.length,!0)),S(x(o.length,!0))}),[o]),Object(n.useEffect)((function(){o.length>0&&g(C.join(o,new N(y,O,M)))}),[o,y,O,M]),r.a.createElement(f.a,null,r.a.createElement(d.a,null,r.a.createElement(A,{joined:v}),r.a.createElement(B,{modules:o,enabledMask:y,setEnabledMask:p,fragmentMask:O,setFragmentMask:_,vocabularyMask:M,setVocabularyMask:S})),r.a.createElement(T,{source:t,setSource:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.1504ab2f.chunk.js.map