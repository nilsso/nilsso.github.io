<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width">
<title>nilsso</title>



	<link rel="stylesheet" href="/assets/css/rouge.css">
<link rel="stylesheet" href="/assets/css/style.css">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Slab" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Noto+Serif" rel="stylesheet"> 


	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
    <nav>
    <span>
        <a href="https://github.com/nilsso">nilsso</a>
        / <a href="/">home</a>
        
        / <span id="page-title">Django notes</span>
        
    </span>
</nav>

    <hr>
    <article>
        <div id="content">
            <h1 id="django">Django</h1>

<h2 id="models">Models</h2>

<h3 id="when-making-changes">When making changes…</h3>

<p>The database needs to be migrated.</p>

<ol>
  <li>Change models (in <code class="highlighter-rouge">models.py</code>)</li>
  <li>Run <code class="highlighter-rouge">python manage.py makemigrations</code> to create migrations for those
changes</li>
  <li>Run <code class="highlighter-rouge">python manage.py migrate</code> to apply changes to the database</li>
</ol>

<h2 id="views">Views</h2>

<h3 id="render-shortcuts">Render shortcuts</h3>

<p>Instead of the full method for rendering an HTTP response view,</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="k">def</span> <span class="nf">someView</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s">"MY_APP/index.html"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">({</span> <span class="p">},</span> <span class="n">request</span><span class="p">))</span></code></pre></figure>

<p>There exists an API shortcut which performs the same action</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="k">def</span> <span class="nf">someView</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"MY_APP/index.html"</span><span class="p">,</span> <span class="p">{</span> <span class="p">})</span></code></pre></figure>

<p>And similarly for 404 requests</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="k">def</span> <span class="nf">someView</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span><span class="p">(</span><span class="s">"Model object does not exist"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"MY_APP/detail.html"</span><span class="p">,</span> <span class="p">{</span> <span class="s">"obj"</span><span class="p">:</span> <span class="n">obj</span> <span class="p">})</span></code></pre></figure>

<p>There exists an API shortcut</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span>
<span class="k">def</span> <span class="nf">someView</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">MyModel</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"MY_APP/detail.html"</span><span class="p">,</span> <span class="p">{</span> <span class="s">"obj"</span><span class="p">:</span> <span class="n">obj</span> <span class="p">})</span></code></pre></figure>

<p>Here’s a list of some of these <a href="https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/">shortcuts</a></p>

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/#render"><code class="highlighter-rouge">render</code></a></td>
      <td>Combines a request, template, and context into an HTTP response</td>
    </tr>
    <tr>
      <td><a href="https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/#get_object_or_404"><code class="highlighter-rouge">get_object_or_404</code></a></td>
      <td>Calls <code class="highlighter-rouge">get()</code> on a model manager, minding 404 exceptions</td>
    </tr>
    <tr>
      <td><a href="https://docs.djangoproject.com/en/1.11/topics/http/shortcuts/#get_list_or_404"><code class="highlighter-rouge">get_list_or_404</code></a></td>
      <td>Calls <code class="highlighter-rouge">filter()</code> on a model manager, minding 404 exceptions</td>
    </tr>
  </tbody>
</table>

<h2 id="routing">Routing</h2>

<p>To tell the engine how to react to HTTP requests we route them to specific views
based on pattern matching.</p>

<ol>
  <li>In <code class="highlighter-rouge">settings.py</code>, <code class="highlighter-rouge">ROOT_URLCONF</code> points to the base web-app URL table</li>
  <li>Regex patterns all URL tables determine to either respond with a view or to
pass the request to other modules.</li>
</ol>

<h2 id="testing">Testing</h2>

<p>With tests, more is better, and redundancy is okay. Include:</p>

<ol>
  <li>a separate <code class="highlighter-rouge">TestClass</code> for each model or view</li>
  <li>a separate test method for each set of conditions to test</li>
  <li>test method names that describe their functions</li>
</ol>

        </div>
    </article>
    <hr>
    <footer>
        


    </footer>
</body>
</html>

